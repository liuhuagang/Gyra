# UE5_Lyra学习指南_021_泽_01_常见G开头的全局变量

本文章仅为小刚-B站课堂-虚幻引擎视频课程Lyra-精讲的演讲手稿.  
本套课程链接:[[UE5]虚幻引擎游戏案例Lyra精讲](https://www.bilibili.com/cheese/play/ss112001159)  
前置课程链接:[[UE5]虚幻引擎UEC++从基础到进阶](https://www.bilibili.com/cheese/play/ss28043)  

文章内容由小刚撰写,采用了以下多种方式:  
1.口述转文字  
2.AI重构  
3.参考引擎源码  
4.Lyra工程源码  
5.结合社区论坛各位大佬的解析  

- [UE5\_Lyra学习指南\_021\_泽\_01\_常见G开头的全局变量](#ue5_lyra学习指南_021_泽_01_常见g开头的全局变量)
  - [概述](#概述)
  - [全局变量总表（按功能分类）](#全局变量总表按功能分类)
  - [关键说明](#关键说明)
  - [扩展建议](#扩展建议)
  - [总结](#总结)



## 概述
以下是 **Unreal Engine 5 (UE5)** 中常见 **G前缀全局变量** 的完整功能整合说明，涵盖引擎核心、性能监控、内存管理及编辑器相关功能：

---

## 全局变量总表（按功能分类）

| **变量名**                  | **类型**       | **作用**                                                                 | **使用场景**                                                                                     |
|------------------------------|----------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
| **`GWorld`**                | `UWorld*`      | 当前游戏世界实例，管理关卡、Actor、物理场景等。                           | 获取场景中的Actor、控制游戏逻辑（暂停/时间缩放）、访问物理系统。                                  |
| **`GEngine`**               | `UEngine*`     | 核心引擎实例，管理渲染、音频、游戏实例等子系统。                          | 打印调试信息（`AddOnScreenDebugMessage`）、控制游戏视口、访问全局管理器（如`GameInstance`）。     |
| **`GEditor`**               | `UEditorEngine*` | 编辑器实例（仅编辑器模式有效），提供编辑器操作接口。                      | 选中对象、修改关卡、触发资源重新导入（如`ImportSubsystem`）。                                    |
| **`GConfig`**               | `FConfigCache*` | 管理配置文件（`.ini`）的读写。                                           | 读写项目或插件配置（如`GConfig->GetString()`）。                                                 |
| **`GRHI`**                  | `FRHICommandList*` | 渲染硬件接口抽象层，封装图形API（DX12/Vulkan）。                         | 提交渲染命令、管理GPU资源（纹理/缓冲区）。                                                       |
| **`GShaderCompilingManager`** | `FShaderCompilingManager*` | 管理异步着色器编译任务。                                                | 检查编译进度（`GetNumRemainingJobs()`）、阻塞等待编译完成。                                      |
| **`GFrameCounter`**         | `uint64`       | 自游戏启动以来的累计帧数。                                               | 调试性能问题、同步逻辑与渲染帧（如每N帧执行一次操作）。                                          |
| **`GAverageFPS`**           | `float`        | 当前平均帧率（FPS）。                                                   | 显示帧率统计（`stat fps`）、动态调整画质。                                                       |
| **`GAverageMS`**            | `float`        | 每帧平均耗时（毫秒）。                                                   | 分析性能瓶颈（渲染 vs 逻辑线程耗时）。                                                           |
| **`GLastMemoryWarningTime`** | `double`       | 最后一次内存警告触发的时间戳（秒）。                                     | 避免频繁内存警告（如移动设备间隔提示）、调试内存峰值。                                            |
| **`GIsLowMemory`**          | `bool`         | 标记当前是否处于低内存状态（由操作系统/引擎触发）。                       | 动态释放资源（如卸载纹理）、避免高开销操作（如流式加载）。                                        |
| **`GIsEditor`**             | `bool`         | 标记当前是否运行在编辑器环境下。                                         | 区分编辑器与运行时逻辑（如`#if WITH_EDITOR`）。                                                  |
| **`GIsGame`**               | `bool`         | 标记当前是否运行在游戏模式下（非编辑器）。                               | 确保仅游戏逻辑执行的代码路径。                                                                   |

---

## 关键说明
1. **访问权限**  
   - 带 `ENGINE_API` 的变量（如 `GAverageFPS`）可通过 `extern` 跨模块访问。  
     ```cpp
     extern ENGINE_API float GAverageFPS; // 声明后直接使用
     ```
   - 部分变量（如 `GEditor`）仅在编辑器中有效，打包后需替换为运行时等效功能。

2. **线程安全**  
   - 多数变量（如 `GWorld`、`GAverageFPS`）由主线程更新，多线程访问需加锁（如 `FScopeLock`）。

3. **调试工具**  
   - 控制台命令快速查看状态：  
     ```bash
     stat unit       # 查看帧时间（GAverageMS）
     stat memory    # 检查内存状态（GIsLowMemory）
     stat fps       # 显示实时帧率（GAverageFPS）
     ```

4. **典型用例**  
   - **性能优化**：根据 `GAverageFPS` 动态降低画质。  
   - **内存管理**：监听 `GIsLowMemory` 释放缓存资源。  
   - **编辑器工具**：通过 `GEditor` 批量修改关卡Actor。  

---

## 扩展建议
- **替代方案**：现代UE5推荐使用子系统（如 `UWorld::GetSubsystem()`）或依赖注入，减少对全局变量的直接依赖。  
- **自定义变量**：可通过 `ENGINE_API` 导出自己的全局变量（需谨慎管理生命周期）。  

如果需要具体代码示例或进一步分类，请随时告知！

## 总结
以上来自DeepSeek.